<?xml version="1.0" encoding="utf-8" ?>
<TabbedPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            x:Class="TeknikServis.Mobile.MainPage"
            SelectedTabColor="#007bff"
            UnselectedTabColor="Gray"
            BarBackgroundColor="White">

    <ContentPage Title="Kayıtlar" >
        <Grid RowDefinitions="Auto,*">
            <Grid ColumnDefinitions="*, Auto" Padding="15">
                <Label Text="Şube Kayıtları" FontSize="20" FontAttributes="Bold" TextColor="#333" VerticalOptions="Center"/>
                <Button Grid.Column="1" Text="Yenile" Clicked="SorgulaBtn_Clicked" HeightRequest="40" BackgroundColor="#007bff" TextColor="White"/>
            </Grid>

            <CollectionView Grid.Row="1" ItemsSource="{Binding MyTickets}" BackgroundColor="#f4f6f9">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Margin="10,5" Padding="15" CornerRadius="10" BackgroundColor="White" HasShadow="True" BorderColor="Transparent">
                            <VerticalStackLayout Spacing="5">
                                <Grid ColumnDefinitions="*, Auto">
                                    <Label Text="{Binding FisNo}" FontAttributes="Bold" TextColor="#007bff" FontSize="16"/>
                                    <Label Grid.Column="1" Text="{Binding Durum}" TextColor="Orange" FontAttributes="Bold"/>
                                </Grid>
                                <Label Text="{Binding Musteri}" FontSize="15" TextColor="#333"/>
                                <Label Text="{Binding Cihaz}" FontSize="13" TextColor="Gray"/>
                                <Label Text="{Binding Tarih}" HorizontalOptions="End" FontSize="11" TextColor="#999"/>
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
                <CollectionView.EmptyView>
                    <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="10">
                        <Label Text="Kayıt bulunamadı." TextColor="Gray"/>
                    </VerticalStackLayout>
                </CollectionView.EmptyView>
            </CollectionView>
        </Grid>
    </ContentPage>

    <ContentPage Title="Yeni Kayıt" >
        <ScrollView BackgroundColor="#f4f6f9">
            <VerticalStackLayout Padding="20" Spacing="20">

                <Label Text="Hızlı Servis Kaydı" FontSize="24" FontAttributes="Bold" TextColor="#333" HorizontalOptions="Center"/>

                <Frame CornerRadius="15" HasShadow="True" BackgroundColor="White" BorderColor="Transparent" Padding="20">
                    <VerticalStackLayout Spacing="15">

                        <Label Text="Adınız Soyadınız" TextColor="#555" FontSize="14"/>
                        <Entry x:Name="TxtAd" Placeholder="Ad Soyad" BackgroundColor="#f1f3f5" TextColor="Black"/>

                        <Label Text="Telefon Numaranız" TextColor="#555" FontSize="14"/>
                        <Entry x:Name="TxtTel" Placeholder="5XX..." Keyboard="Telephone" BackgroundColor="#f1f3f5" TextColor="Black"/>

                        <Label Text="Cihaz Marka/Model" TextColor="#555" FontSize="14"/>
                        <Entry x:Name="TxtCihaz" Placeholder="Örn: iPhone 11" BackgroundColor="#f1f3f5" TextColor="Black"/>

                        <Label Text="Arıza Açıklaması" TextColor="#555" FontSize="14"/>
                        <Editor x:Name="TxtSorun" Placeholder="Sorun nedir?" HeightRequest="100" BackgroundColor="#f1f3f5" TextColor="Black"/>

                        <Button x:Name="KaydetBtn" Text="Servis Kaydı Oluştur" Clicked="KaydetBtn_Clicked" BackgroundColor="#28a745" TextColor="White" CornerRadius="10" HeightRequest="50" FontAttributes="Bold" Margin="0,10,0,0"/>

                        <ActivityIndicator x:Name="YukleniyorKayit" IsRunning="False" Color="#28a745"/>
                    </VerticalStackLayout>
                </Frame>

            </VerticalStackLayout>
        </ScrollView>
    </ContentPage>

</TabbedPage>